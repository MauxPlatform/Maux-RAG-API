# ๐ ุฑุงูููุง ุณุฑุน ุงุณุชูุงุฏู ุงุฒ AvalAI

ุณูุงู! ๐
ุงู ุฑุงูููุง ุจู ุดูุง ฺฉูฺฉ ูโฺฉูู ุชุง ุณุฑุนุงู ุณุณุชู RAG ุฑู ุจุง [AvalAI](https://avalai.ir) ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ.

## ๐ ูพุดโูุงุฒูุง

1. ูพุงุชูู 3.8 ุง ุจุงูุงุชุฑ
2. ฺฉ ุงฺฉุงูุช ุฏุฑ [AvalAI](https://avalai.ir)
3. API key ุงุฒ ูพูู ฺฉุงุฑุจุฑ AvalAI

## ๐ ุดุฑูุน ุณุฑุน

1. **ูุตุจ ู ุฑุงูโุงูุฏุงุฒ**
```bash
# ฺฉููู ฺฉุฑุฏู ูพุฑูฺู
git clone https://github.com/MauxPlatform/Maux-RAG-API.git
cd Maux-RAG-API

# ูุตุจ ูพฺฉุฌโูุง
pip install -r requirements.txt
```

2. **ุชูุธูุงุช AvalAI**

ฺฉ ูุงู `.env` ุจุณุงุฒุฏ:
```env
PROVIDER=avalai
AVALAI_API_KEY=your_avalai_key
AVALAI_BASE_URL=https://api.avalapis.ir/v1
CHAT_MODEL=gpt-4o-mini
```

3. **ุงุฌุฑุง ุณุฑูุฑ**
```bash
uvicorn app.main:app --reload
```

## ๐ ุงูุฒูุฏู ุงุณูุงุฏ ููููู

ุจุฑุง ุชุณุช ุณุฑุน ุณุณุชูุ ูโุชููุฏ ุงุฒ ุงุณฺฉุฑูพุช ููููู ุงุณุชูุงุฏู ฺฉูุฏ:
```bash
python examples/add_content.py
```

ุงู ุงุณฺฉุฑูพุช ฺูุฏ ุณูุฏ ููููู ูุงุฑุณ ุจู ุณุณุชู ุงุถุงูู ูโฺฉูู.

## ๐ฌ ุชุณุช ุณุณุชู

1. **ุงูุฒูุฏู ฺฉ ุณูุฏ ุฌุฏุฏ**
```python
import requests

doc = {
    "text": "ุงู ฺฉ ูุชู ุชุณุช ุงุณุช ุจุฑุง ุณุณุชู RAG ุจุง ุงุณุชูุงุฏู ุงุฒ AvalAI",
    "metadata": {
        "source": "ุชุณุช",
        "language": "fa"
    }
}

response = requests.post(
    "http://localhost:8000/v1/vector_db/add_document",
    json=doc
)
print(response.json())
```

2. **ูพุฑุณุด ู ูพุงุณุฎ**
```python
chat_request = {
    "model": "gpt-4o-mini",
    "messages": [
        {
            "role": "user",
            "content": "ุณูุงู ุดูุง ุงูุฌุง"
        }
    ]
}

response = requests.post(
    "http://localhost:8000/v1/chat/completions",
    json=chat_request
)
print(response.json())
```

## ๐ ุชุบุฑ ูุฏูโูุง

AvalAI ูุฏูโูุง ูุฎุชูู ุงุฑุงุฆู ูุฏู. ุจุฑุง ุชุบุฑ ูุฏู ูโุชููุฏ:

1. ุฏุฑ ูุงู `.env`:
```env
CHAT_MODEL=gpt-4o-mini  # ุง ูุฑ ูุฏู ุฏฺฏู
```

2. ุง ูููุน ุฏุฑุฎูุงุณุช:
```python
chat_request = {
    "model": "ูุฏู ุฏูุฎูุงู ุดูุง",
    "messages": [...]
}
```

## ๐ก ูฺฉุงุช ููู

1. **ูุญุฏูุฏุชโูุง API**
   - ุจู ูุญุฏูุฏุชโูุง API ุฏุฑ ูพูู AvalAI ุชูุฌู ฺฉูุฏ
   - ุงุฒ Rate Limiting ุขฺฏุงู ุจุงุดุฏ

2. **ุจูููโุณุงุฒ ูุฒูู**
   - ุงุฒ ุงุณุชุฑููฺฏ ุจุฑุง ูพุงุณุฎโูุง ุทููุงู ุงุณุชูุงุฏู ฺฉูุฏ
   - ุงุณูุงุฏ ุฑู ุจุง ูุชุงุฏุชุง ููุงุณุจ ุฐุฎุฑู ฺฉูุฏ

3. **ุฒุจุงู ูุงุฑุณ**
   - ุญุชูุงู `language: "fa"` ุฑู ุฏุฑ ูุชุงุฏุชุง ูุดุฎุต ฺฉูุฏ
   - ุงุฒ ููฺฉุฏ ุฏุฑุณุช ุจุฑุง ูุชูู ูุงุฑุณ ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ุนุจโุงุจ

### ุฎุทุง ุงุนุชุจุงุฑุณูุฌ API
```
ValueError: AVALAI_API_KEY is required when using AvalAI provider
```
- ูุทูุฆู ุดุฏ `AVALAI_API_KEY` ุฏุฑ ูุงู `.env` ุชูุธู ุดุฏู
- ุฏุฑุณุช API key ุฑู ฺฺฉ ฺฉูุฏ

### ุฎุทุง ุงุชุตุงู
```
ConnectionError: Could not connect to AvalAI
```
- ุงุชุตุงู ุงูุชุฑูุช ุฑู ฺฺฉ ฺฉูุฏ
- VPN ุง ูพุฑูฺฉุณ ุฑู ฺฺฉ ฺฉูุฏ
- ุฏุฑุณุช `AVALAI_BASE_URL` ุฑู ุจุฑุฑุณ ฺฉูุฏ



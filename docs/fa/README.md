# ๐ ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ RAG API

ุณูุงู! ๐
ุจู ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ RAG API ุฎูุด ุงููุฏุฏ. ุงู API ุจู ุดูุง ฺฉูฺฉ ูฺฉูู ุชุง ุจู ุฑุงุญุช ฺฉ ุณุณุชู ูพุฑุณุด ู ูพุงุณุฎ ููุดููุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณูุงุฏ ุฎูุฏุชูู ุจุณุงุฒุฏ.

## ๐ ููุฑุณุช ูุทุงูุจ
- [ุดุฑูุน ุณุฑุน](#ุดุฑูุน-ุณุฑุน)
- [ุชูุธูุงุช](#ุชูุธูุงุช)
- [ุงูุฒูุฏู ุงุณูุงุฏ](#ุงูุฒูุฏู-ุงุณูุงุฏ)
- [ูพุฑุณุด ู ูพุงุณุฎ](#ูพุฑุณุด-ู-ูพุงุณุฎ)
- [ูพุดุชุจุงู ุงุฒ AvalAI](#ูพุดุชุจุงู-ุงุฒ-avalai)

## ๐ ุดุฑูุน ุณุฑุน

1. ุงูู ูพุฑูฺู ุฑู ฺฉููู ฺฉูุฏ:
```bash
git clone https://github.com/MauxPlatform/Maux-RAG-API.git
cd Maux-RAG-API
```

2. ูพฺฉุฌโูุง ููุฑุฏ ูุงุฒ ุฑู ูุตุจ ฺฉูุฏ:
```bash
pip install -r requirements.txt
```

3. ฺฉ ูุงู `.env` ุจุณุงุฒุฏ ู ุชูุธูุงุช ุฑู ูุงุฑุฏ ฺฉูุฏ:
```env
# ุจุฑุง ุงุณุชูุงุฏู ุงุฒ OpenAI
PROVIDER=openai
OPENAI_API_KEY=your_openai_key

# ุง ุจุฑุง ุงุณุชูุงุฏู ุงุฒ AvalAI
PROVIDER=avalai
AVALAI_API_KEY=your_avalai_key
```

4. ุณุฑูุฑ ุฑู ุงุฌุฑุง ฺฉูุฏ:
```bash
uvicorn app.main:app --reload
```

ุชุจุฑฺฉ! ๐ ุญุงูุง API ุดูุง ุฑู ุขุฏุฑุณ `http://localhost:8000` ุฏุฑ ุฏุณุชุฑุณู.

## โ๏ธ ุชูุธูุงุช

ุดูุง ูโุชููุฏ ุงุฒ ุฏู ุณุฑูุณ ุจุฑุง ููุด ูุตููุน ุงุณุชูุงุฏู ฺฉูุฏ:

### OpenAI
```env
PROVIDER=openai
OPENAI_API_KEY=your_openai_key
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
CHAT_MODEL=gpt-4o-mini
```

### AvalAI
```env
PROVIDER=avalai
AVALAI_API_KEY=your_avalai_key
AVALAI_BASE_URL=https://api.avalapis.ir/v1
```

## ๐ ุงูุฒูุฏู ุงุณูุงุฏ

ุจุฑุง ุงูุฒูุฏู ุงุณูุงุฏ ุจู ูพุงฺฏุงู ุฏุงุฏูุ ูโุชููุฏ ุงุฒ API ุง ุงุณฺฉุฑูพุช ููููู ุงุณุชูุงุฏู ฺฉูุฏ:

### ุจุง ุงุณุชูุงุฏู ุงุฒ API
```python
import requests

doc = {
    "text": "ูุชู ุณูุฏ ุดูุง",
    "metadata": {
        "source": "ููุจุน",
        "date": "2024-01",
        "type": "ููุน ุณูุฏ",
        "language": "fa"
    }
}

response = requests.post(
    "http://localhost:8000/v1/vector_db/add_document", 
    json=doc
)
print(response.json())
```

### ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ููููู
ุงุฒ ูุงู `examples/add_content.py` ูโุชููุฏ ุจุฑุง ุงูุฒูุฏู ุงุณูุงุฏ ููููู ุงุณุชูุงุฏู ฺฉูุฏ:
```bash
python examples/add_content.py
```

## ๐ฌ ูพุฑุณุด ู ูพุงุณุฎ

ุจุฑุง ูพุฑุณุด ู ุฏุฑุงูุช ูพุงุณุฎุ ูโุชููุฏ ุงุฒ API ุงุณุชูุงุฏู ฺฉูุฏ:

```python
import requests

chat_request = {
    "model": "gpt-4o-mini",  # ุง ูุฏู ุฏูุฎูุงู ุฏฺฏู
    "messages": [
        {
            "role": "user",
            "content": "ุณูุงู ุดูุง ุงูุฌุง"
        }
    ]
}

response = requests.post(
    "http://localhost:8000/v1/chat/completions",
    json=chat_request
)
print(response.json())
```

### ูพุงุณุฎโูุง ุงุณุชุฑู (ุฒูุฏู)
ุจุฑุง ุฏุฑุงูุช ูพุงุณุฎ ุจู ุตูุฑุช ุฒูุฏู:

```python
chat_request["stream"] = True
response = requests.post(
    "http://localhost:8000/v1/chat/completions",
    json=chat_request,
    stream=True
)

for line in response.iter_lines():
    if line:
        print(line.decode())
```

## ๐ ูพุดุชุจุงู ุงุฒ AvalAI

[AvalAI](https://avalai.ir) ฺฉ ุณุฑูุณ ุงุฑุงู ููุด ูุตููุนู ฺฉู API ุณุงุฒฺฏุงุฑ ุจุง OpenAI ุงุฑุงุฆู ูุฏู. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ AvalAI:

1. ฺฉ ุงฺฉุงูุช ุฏุฑ [AvalAI](https://avalai.ir) ุจุณุงุฒุฏ
2. API key ุฑู ุงุฒ ูพูู ฺฉุงุฑุจุฑ ุฏุฑุงูุช ฺฉูุฏ
3. ุชูุธูุงุช ุฑู ุฏุฑ ูุงู `.env` ุจู ุงู ุดฺฉู ุชุบุฑ ุจุฏุฏ:
```env
PROVIDER=avalai
AVALAI_API_KEY=your_avalai_key
```

ููู! ๐ ุญุงูุง ุณุณุชู ุจู ุฌุง OpenAI ุงุฒ AvalAI ุงุณุชูุงุฏู ูโฺฉูู.

## ๐ ุฌุณุชุฌู ุงุณูุงุฏ

ุจุฑุง ุฌุณุชุฌู ูุณุชูู ุฏุฑ ุงุณูุงุฏ:

```python
import requests

query = {
    "prompt": "ูุชู ุฌุณุชุฌู ุดูุง"
}

response = requests.post(
    "http://localhost:8000/v1/vector_db/search_documents",
    json=query
)
print(response.json())
```

## ๐งน ูพุงฺฉุณุงุฒ ูพุงฺฏุงู ุฏุงุฏู

ุงฺฏู ุฎูุงุณุชุฏ ููู ุงุณูุงุฏ ุฑู ูพุงฺฉ ฺฉูุฏ:

```python
requests.delete("http://localhost:8000/v1/vector_db/clear_collection")
```

## ๐ก ูฺฉุงุช ููุฏ

1. ุงุณูุงุฏ ุฑู ุจุง ูุชุงุฏุชุง ููุงุณุจ ุฐุฎุฑู ฺฉูุฏ ุชุง ุจุนุฏุงู ุฑุงุญุชโุชุฑ ูพุฏุงุดูู ฺฉูุฏ
2. ุงุฒ ุงุณุชุฑููฺฏ ุจุฑุง ูพุงุณุฎโูุง ุทููุงู ุงุณุชูุงุฏู ฺฉูุฏ
3. ูโุชููุฏ ุจู OpenAI ู AvalAI ุจู ุฑุงุญุช ุณูฺ ฺฉูุฏ
4. ุงุณูุงุฏ ูุงุฑุณ ุฑู ุจุง `language: "fa"` ุฏุฑ ูุชุงุฏุชุง ูุดุฎุต ฺฉูุฏ

## ๐ค ุณูุงูุงุช ูุชุฏุงูู

### ฺุทูุฑ ูโุชููู ูุฏู ุฑู ุนูุถ ฺฉููุ
ุฏุฑ ูุงู `.env` ูโุชููุฏ `CHAT_MODEL` ุฑู ุชุบุฑ ุจุฏุฏ ุง ูููุน ุฏุฑุฎูุงุณุช ุฏุฑ ูพุงุฑุงูุชุฑ `model` ูุฏู ุฏูุฎูุงู ุฑู ูุดุฎุต ฺฉูุฏ.


### ุณุณุชู ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุ
1. ุงุณูุงุฏ ุดูุง ุจู vector ุชุจุฏู ู ุฐุฎุฑู ูุดู
2. ูููุน ูพุฑุณุดุ ูุชู ุณูุงู ูู ุจู vector ุชุจุฏู ูุดู
3. ุดุจูโุชุฑู ุงุณูุงุฏ ุจู ุณูุงู ูพุฏุง ูุดู
4. ุงู ุงุณูุงุฏ ููุฑุงู ุจุง ุณูุงู ุจู model ููุด ูุตููุน ุฏุงุฏู ูุดู
5. model ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ุงุทูุงุนุงุช ูพุงุณุฎ ูุฏู

